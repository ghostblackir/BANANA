<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BANANA - Premium Authentication</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { font-family: 'Inter', sans-serif; }
.luxury-gradient { background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 25%, #1f1f1f 50%, #0f0f0f 100%); }
.gold-accent { background: linear-gradient(135deg, #d4af37 0%, #ffd700 50%, #b8860b 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
.premium-card { background: rgba(255,255,255,0.95); backdrop-filter: blur(20px); border:1px solid rgba(212,175,55,0.2); box-shadow: 0 25px 50px rgba(0,0,0,0.25),0 0 0 1px rgba(255,255,255,0.1);}
.elegant-input { background: rgba(248,248,248,0.8); border:2px solid rgba(212,175,55,0.3); transition: all 0.3s cubic-bezier(0.4,0,0.2,1); }
.elegant-input:focus { background: rgba(255,255,255,0.95); border-color:#d4af37; box-shadow:0 0 0 4px rgba(212,175,55,0.1);}
.luxury-button { background: linear-gradient(135deg,#d4af37 0%,#ffd700 50%,#b8860b 100%); box-shadow:0 8px 25px rgba(212,175,55,0.3); transition: all 0.3s cubic-bezier(0.4,0,0.2,1);}
.luxury-button:hover { transform: translateY(-2px); box-shadow:0 12px 35px rgba(212,175,55,0.4);}
.shake { animation: elegantShake 0.6s ease-in-out; }
@keyframes elegantShake { 0%,100% {transform:translateX(0);} 25% {transform:translateX(-3px);} 75% {transform:translateX(3px);} }
.fade-in { animation: luxuryFadeIn 1.2s ease-out; }
@keyframes luxuryFadeIn { from {opacity:0; transform: translateY(30px) scale(0.95);} to {opacity:1; transform:translateY(0) scale(1);} }
.transform-style-preserve-3d { transform-style: preserve-3d; }
.backface-hidden { backface-visibility: hidden; }
.rotate-y-180 { transform: rotateY(180deg);}
.card-flipped { transform: rotateY(180deg); }
.card-face { transition: transform 0.6s; }
.secret-panel { background: linear-gradient(135deg,#1a1a1a 0%,#2d2d2d 50%,#1f1f1f 100%); color:white; }
.code-display { background: rgba(212,175,55,0.1); border:2px solid rgba(212,175,55,0.3); backdrop-filter: blur(10px); }
.luxury-title { font-family: 'Playfair Display', serif; font-weight:600; letter-spacing:0.1em; }
</style>
</head>
<body class="min-h-screen luxury-gradient flex items-center justify-center p-4">

<div id="mainContent" class="fade-in" style="perspective:1000px;">
  <div class="card-container w-full max-w-md relative transition-transform duration-700 transform-style-preserve-3d" id="cardContainer">
    
    <!-- Front Panel -->
    <div class="card-face backface-hidden premium-card rounded-2xl p-10 text-center">
      <div class="mb-10">
        <div class="flex justify-center items-center mb-6">
          <div class="banana-logo cursor-pointer" onclick="flipCard()">
            <img src="https://cdn-icons-png.flaticon.com/512/6482/6482627.png" alt="BANANA Logo" class="w-20 h-20 object-contain rounded-lg">
          </div>
        </div>
        <h1 class="luxury-title text-5xl gold-accent mb-3">BANANA</h1>
        <p class="text-gray-600 text-sm font-medium tracking-wide">PREMIUM AUTHENTICATION SYSTEM</p>
      </div>

      <div class="space-y-8">
        <div class="text-left">
          <label class="block text-sm font-medium text-gray-700 mb-3">Authentication Code</label>
          <input type="text" id="captchaInput" class="elegant-input w-full px-6 py-4 rounded-lg text-center text-xl font-mono tracking-[0.3em] focus:outline-none" placeholder="Enter Code" maxlength="6">
        </div>

        <div id="errorMessage" class="hidden bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg">
          <p class="font-medium text-sm">Invalid authentication code</p>
          <p class="text-xs mt-1">Attempts remaining: <span id="attemptsLeft">3</span></p>
        </div>

        <button id="verifyBtn" class="luxury-button w-full text-white font-semibold py-4 px-8 rounded-lg text-sm tracking-wide uppercase">
          Authenticate
        </button>
      </div>
    </div>

    <!-- Back Panel -->
    <div class="card-face absolute inset-0 backface-hidden rotate-y-180 secret-panel rounded-2xl p-10 flex flex-col items-center justify-center text-center">
      <h2 class="luxury-title text-3xl gold-accent mb-8">Secret Access Code</h2>
      <div class="code-display rounded-xl p-8 mb-8">
        <div id="secretCodeDisplay" class="text-4xl font-mono font-bold tracking-[0.2em] gold-accent mb-4">Loading...</div>
        <div class="text-sm text-gray-300 font-light">Copy this code and enter in the main panel</div>
      </div>
      <button onclick="flipCard()" class="bg-white bg-opacity-10 hover:bg-opacity-20 px-8 py-3 rounded-lg text-sm font-medium tracking-wide uppercase transition-all duration-300 border border-white border-opacity-20">
        Return
      </button>
    </div>

  </div>
</div>

<script>
let attempts = 0;
const maxAttempts = 3;
let correctCode = ""; // این کد فقط وقتی پشت پنل باز شد تولید میشه

const input = document.getElementById('captchaInput');
const verifyBtn = document.getElementById('verifyBtn');
const errorMessage = document.getElementById('errorMessage');
const attemptsLeft = document.getElementById('attemptsLeft');
const mainContent = document.getElementById('mainContent');
const errorPage = document.getElementById('errorPage');
const cardContainer = document.getElementById('cardContainer');
const secretCodeDisplay = document.getElementById('secretCodeDisplay');

// تولید کپچا فقط پشت پنل
function generateCaptcha() {
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    let captcha = "";
    for (let i = 0; i < 6; i++) {
        captcha += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    correctCode = captcha;
    if (secretCodeDisplay) secretCodeDisplay.textContent = captcha;
}

// نمایش خطا و شمارش تلاش‌ها
function showError() {
    attempts++;
    const remaining = maxAttempts - attempts;

    if (remaining > 0) {
        errorMessage.classList.remove('hidden');
        attemptsLeft.textContent = remaining;

        input.classList.add('shake');
        setTimeout(() => input.classList.remove('shake'), 600);

        input.value = '';
        input.focus();
    } else {
        mainContent.classList.add('hidden');
        errorPage.classList.remove('hidden');
    }
}

// بررسی کد وارد شده توسط کاربر
function verifyCode() {
    const enteredCode = input.value.trim().toUpperCase();
    if (enteredCode === correctCode) {
        input.style.borderColor = '#10b981';
        input.style.boxShadow = '0 0 8px #10b981';
        verifyBtn.textContent = 'Authenticating...';
        verifyBtn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';

        setTimeout(() => {
            window.location.href = 'index.html';
        }, 1200);
    } else {
        showError();
    }
}

// flip کردن کارت و تولید کپچا
function flipCard() {
    cardContainer.classList.toggle('card-flipped');
    if (cardContainer.classList.contains('card-flipped')) {
        generateCaptcha(); // پشت پنل کپچا تولید می‌کنه
    }
}

// Event listeners
verifyBtn.addEventListener('click', verifyCode);
input.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') verifyCode();
});
input.addEventListener('input', () => {
    if (!errorMessage.classList.contains('hidden')) {
        errorMessage.classList.add('hidden');
    }
});

// Load اولیه: هیچ کپچایی تو پنل اصلی نمایش داده نمی‌شه
window.addEventListener('load', () => {
    input.focus();
});

</script>

</body>
</html>
